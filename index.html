<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freight Connect Bid Submission</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for readability and spacing */
        body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; }
        .info-card { background-color: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05); }
        .section-header { border-bottom: 2px solid #3b82f6; padding-bottom: 8px; margin-bottom: 16px; color: #1f2937; font-weight: 700; }
        .detail-item { padding: 4px 0; }
        .bid-box { background-color: #e5f1ff; border: 1px solid #93c5fd; }

        /* Custom CSS to hide the up/down arrows (spin buttons) for number input */
        .no-spinners::-webkit-outer-spin-button,
        .no-spinners::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .no-spinners {
            -moz-appearance: textfield; /* Firefox */
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="max-w-4xl mx-auto">
        
        <h1 class="text-2xl font-bold text-gray-800 mb-6">Load #L-4839: Detailed Shipment Information</h1>

        <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div class="info-card p-6">
                <h2 class="section-header">Pickup Stops (1):</h2>
                <div class="text-sm">
                    <p class="font-semibold text-gray-700">42158 Rd 33 E, Ste Anne, MB, R5H1R1, CA</p>
                    <p class="text-gray-500">Contact: La Cocina Foods</p>
                    <a href="tel:204-381-4471" class="text-blue-600 hover:text-blue-800">204.381.4471</a>
                </div>
            </div>
            
            <div class="info-card p-6">
                <h2 class="section-header">Delivery Stops (1):</h2>
                <div class="text-sm">
                    <p class="font-semibold text-gray-700">19580 TELEGRAPH TRAIL, Surrey, BC, V4N4H1, CA</p>
                    <p class="text-gray-500">Contact: Associated Grocers</p>
                    <a href="tel:6048887061" class="text-blue-600 hover:text-blue-800">(604) 888-7061 ext 357</a>
                    <a href="#" class="text-red-600 font-bold block mb-1">Appointment Required</a>
                </div>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div class="info-card p-6">
                <h2 class="section-header">Shipment Specifications</h2>
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div class="detail-item border-r pr-4">
                        <p class="text-xl font-bold text-gray-900">LTL</p> 
                        <p class="text-gray-500 text-xs">(Dry Van)</p>
                    </div>
                    <div class="detail-item">
                        <p class="text-xl font-bold text-gray-900">4,000 <span class="text-sm font-normal text-gray-500">lbs</span></p>
                        <p class="text-gray-500 text-xs">Total Weight</p>
                    </div>
                    <div class="detail-item border-r pr-4">
                        <p class="text-xl font-bold text-gray-900">8</p>
                        <p class="text-gray-500 text-xs">Total Skid Quantity</p>
                    </div>
                    <div class="detail-item">
                        <p class="text-xl font-bold text-gray-900">13.3 <span class="text-sm font-normal text-gray-500">ft</span></p>
                        <p class="text-gray-500 text-xs">Est. Linear Feet</p>
                    </div>
                </div>
            </div>

            <div class="info-card p-6">
                <h2 class="section-header">Scheduling</h2>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between detail-item">
                        <p class="text-gray-500">Pickup Deadline</p>
                        <p class="font-bold text-red-600">Nov 17, 2025</p>
                    </div>
                    <div class="flex justify-between detail-item">
                        <p class="text-gray-500">Drop Off Deadline</p>
                        <p class="font-bold text-red-600">Nov 24, 2025</p>
                    </div>
                </div>
                <h3 class="font-bold text-gray-700 mt-4 mb-2">Attachments</h3>
                
                <div class="flex justify-between items-center detail-item text-sm">
                    <p class="text-blue-600 hover:underline">Shipper Documents (.pdf)</p>
                    <div class="flex space-x-2 text-xs">
                        <a href="VIEW_LINK_1" target="_blank" class="text-blue-600 hover:text-blue-800 font-semibold">View</a>
                        <span class="text-gray-400">|</span>
                        <a href="DOWNLOAD_LINK_1" download class="text-blue-600 hover:text-blue-800 font-semibold">Download</a>
                    </div>
                </div>
                
                <div class="flex justify-between items-center detail-item text-sm">
                    <p class="text-blue-600 hover:underline">Load Permit (.tiff)</p>
                    <div class="flex space-x-2 text-xs">
                        <a href="VIEW_LINK_2" target="_blank" class="text-blue-600 hover:text-blue-800 font-semibold">View</a>
                        <span class="text-gray-400">|</span>
                        <a href="DOWNLOAD_LINK_2" download class="text-blue-600 hover:text-blue-800 font-semibold">Download</a>
                    </div>
                </div>
                
            </div>
        </div>

        <div class="info-card p-6 mb-6">
            <h2 class="section-header">Skid Details</h2>
            <table class="w-full text-sm">
                <thead>
                    <tr class="text-gray-500 uppercase tracking-wider border-b"> 
                        <th class="py-2 text-left" style="width: 25%;">Quantity</th>
                        <th class="py-2 text-center" style="width: 50%;">Dimensions (L×W×H IN)</th>
                        <th class="py-2 text-right" style="width: 25%;">Weight Per Skid (LBS)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b last:border-b-0">
                        <td class="py-2 font-bold text-left" style="width: 25%;">8</td>
                        <td class="py-2 text-center" style="width: 50%;">
                            <div class="mx-auto">48 x 40 x 94</div>
                        </td>
                        <td class="py-2 text-right" style="width: 25%;">500</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="info-card p-6 mb-6 bg-yellow-50 border-yellow-300 border-l-4">
            <h2 class="section-header !text-yellow-800 !border-b-yellow-500">Special Notes</h2>
            <p class="text-sm text-gray-700 leading-relaxed">
                Shipped food, cannot have hazardous materials, needs a clean trailer. Carrier to book delivery appointments and accommodate after-hours delivery where required. Appointment needs to be booked ASAP and attended on time to avoid late fees. Receiving appointments can be booked via phone Monday – Friday 7 AM. Carrier needs to provide a lumper for this shipment. Pickup hours M-F: 8am-5pm. Delivery hours are Monday to Friday 6:30AM – Noon.
            </p>
        </div>

        <div class="info-card p-6 bid-box">
            <h2 class="text-xl font-bold text-blue-800 mb-4">Submit Your Bid</h2>
            <form id="bidForm">
                
                <div class="mb-4">
                    <label for="bidRate" class="block text-sm font-medium text-gray-700 mb-1">Rate (Required)</label>
                    <div class="relative flex rounded-lg shadow-sm">
                        <select id="currency" name="currency" class="appearance-none rounded-l-lg border border-blue-300 bg-gray-50 text-gray-700 font-semibold text-base py-3 pl-3 pr-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="CAD" selected>CAD</option>
                            <option value="USD">USD</option>
                        </select>
                        
                        <div class="relative flex-grow">
                            <span id="currencySymbol" class="absolute left-0 inset-y-0 flex items-center pl-3 text-lg text-gray-500 font-bold">$</span>
                            
                            <input type="number" id="bidRate" name="bidRate" required class="w-full pl-8 pr-4 py-3 border border-blue-300 rounded-r-lg focus:ring-blue-500 focus:border-blue-500 text-lg no-spinners">
                        </div>
                    </div>
                </div>

                <div class="mb-6">
                    <label for="bidNotes" class="block text-sm font-medium text-gray-700 mb-1">Notes (e.g., Available today, 53' Dry Van, Quote valid for 24 hours)</label>
                    <textarea id="bidNotes" name="bidNotes" rows="2" class="w-full px-4 py-3 border border-blue-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-base shadow-sm" placeholder="Optional details for the shipper..."></textarea>
                </div>

                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition duration-150 ease-in-out shadow-lg">
                    Submit Bid
                </button>
            </form>
            
            <div id="statusMessage" class="mt-4 text-center text-sm font-semibold hidden"></div>
        </div>
    </div>

    <script>
        // --- PROTOTYPE SIMULATION LOGIC & JS CURRENCY HANDLER ---
        const bidForm = document.getElementById('bidForm');
        const statusMessage = document.getElementById('statusMessage');
        const currencySelector = document.getElementById('currency');
        const bidRateInput = document.getElementById('bidRate');
        const currencySymbolSpan = document.getElementById('currencySymbol'); 

        // This would be dynamically generated by your Google Sheet/Make flow
        const LOAD_ID = "L-4839";
        const CARRIER_ID = "CARR-987"; 
        const CARRIER_EMAIL = "carrier@example.com"; 

        // Function to update the symbol next to the input field
        function updateCurrencySymbol() {
            // FIX: Always set the symbol to '$' as requested, regardless of currencySelector.value
            currencySymbolSpan.textContent = '$';
        }

        // Event listener for currency change
        currencySelector.addEventListener('change', updateCurrencySymbol);

        // Initialize symbol on load (will now always be '$')
        updateCurrencySymbol();


        bidForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const rate = bidRateInput.value;
            const currency = currencySelector.value;
            const notes = document.getElementById('bidNotes').value;
            
            if (!rate) {
                statusMessage.textContent = 'Please enter a rate to submit your bid.';
                statusMessage.classList.remove('hidden', 'text-green-600', 'text-red-600');
                statusMessage.classList.add('text-red-600');
                return;
            }

            // 1. COLLECT THE DATA
            const bidData = {
                load_id: LOAD_ID,
                carrier_id: CARRIER_ID,
                carrier_email: CARRIER_EMAIL,
                // Combine the structured rate and the unstructured notes. 
                raw_carrier_bid_text: `My rate for Load ${LOAD_ID} is ${rate} ${currency}. Notes: ${notes}.`
            };

            console.log('--- Data Prepared for Make/Zapier Bridge ---');
            console.log(JSON.stringify(bidData, null, 2));
            
            // 2. SIMULATE SUCCESS
            
            statusMessage.textContent = `Bid for Load ${LOAD_ID} submitted successfully! Your rate of ${rate} ${currency} has been recorded. (Check your browser console for the mock data sent to the AI.)`;
            statusMessage.classList.remove('hidden', 'text-red-600');
            statusMessage.classList.add('text-green-600');
            
            // Log the data to the console for confirmation
            console.log(bidData);

            // You might want to prevent repeated submissions after a successful one
            // bidForm.querySelector('button').disabled = true;
            // bidForm.reset(); 
        });
    </script>
</body>
</html>
